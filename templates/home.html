{% extends "base.html" %}

{% block top_menu %}
{% if user %}
  {% include "topmenu.html" %}
{% endif %}
{% endblock %}

{% block content %}

<script type="text/javascript" charset="utf-8">
  $(document).ready(function() {
    $('input#delete-account').click(function() {
      if (confirm('Are you sure you want to delete your username? This won\'t affect your Google account, but will delete all of the admonitions people have left for you.')) {
        window.location = "/delete_username";
      }
    });
    $('a#delete-response').click(function() {
      if (confirm('Are you sure you want to delete this admonition?')) {
        var response_id = parseInt($(this).attr("response_id"));
        window.location = "/delete_admonition?id="+response_id;
      }
    });
  });
</script>

{% if not user %}
<!-- <h1>Admonymous</h1> -->

  <div style="padding:40px 0 30px 0;text-align:left;width:980px;margin-left:auto;margin-right:auto;">
    
    <img src="/static/images/Admonymous_logo.png" width="983" height="150" style="margin-left:auto;margin-right:auto;"/>
    
    <div id="signup-bar" class="well">
      <a href="/login" class="btn nodecorate primary float-right large">Log in with your Google account</a>
      This website lets you leave anonymous admonition and admiration for your friends and coworkers. 
    </div>
    
    <div id="example-admonitions">
      <div class="span5">
        &ldquo;The sound you make when you enjoy your food is adorable, but probably not working for you during business lunches.&rdquo;
      </div>
      <div class="span5">
        &ldquo;You&rsquo;ve said so many times that it's important to you not to skip Physics class, but you weren&rsquo;t there again today &ndash; this is just a heads up to keep you thinking!&rdquo;
      </div>
      <div class="span4">
        &ldquo;I really appreciated your new approach to keeping the group on track today, stick with it!&rdquo;
      </div>
    </div>
    
    <div style="clear:both;height:45px;"></div>
    <hr/>
    
    <div id="definition">
      <h3><strong>Admonition</strong> (plural admonitions): Gentle or friendly reproof; counseling against fault or oversight; warning.</h3>
      <br/>

      <p>People have faults. Generally, faults are not easy to amend, but once aware of them, we can work towards their resolution. Hardest to resolve are faults that we are blind to, so we depend on others to hold up the mirror of admonition and help us become aware of them.</p>

      <p>Admonitions are rare in most societies, while unconstructive criticism and insincere flattery are common. Most people recoil from reproving others, since they do not want to risk reactions of anger or hate. Admonitions are beneficial to both giver and recipient, but the inability to deliver them without risking an adverse reaction significantly limits their use.</p>

      <p>Admonymous allows everyone to anonymously admonish and admire their friends and acquaintances. All you need to do in order to let others admonish and admire you is <a href="/login">sign up</a> and publish the admonition link where people can see it: in your email signature, on notes posted in places where you spend a lot of time, on your shirt. By becoming aware of your blind spots, you will be able to address them.</p>

      <p>Giving and receiving good admonitions is not easy. There are many good books about constructive criticism, dealing with criticism, and communication in difficult situations. If you want a quick introduction to some basic principles, try our <a href="/crash_course" target="_new">crash course in anonymous admonition and admiration</a>.</p>
    </div>
    
    <div style="text-align:center;padding:0 0 50px 0;">
      <a href="/">Home</a> | <a href="/crash_course">Crash course</a> | <a href="/contact">Contact</a> | <a href="/login">Log in</a>
    </div>
    
  </div>
{% else %}
    {% if user.username %}
    <div style="padding:0 22px;">
      
      {% if responses %}
        {% for response in responses %}
          <div class="response">

            <div class="response-meta">
              <span style="font-weight:bold;">{{ response.create_date|date:"l n.j.y" }}</span><br/>
              <span style="color:#666;">{{ response.author|default_if_none:"anonymous" }}</span>
            </div>
            <div class="response-body">
              <a class="btn small" id="delete-response" response_id="{{ response.response_id }}" style="float:right;margin:0 0 10px 10px;">delete </a>
              {{ response.body }}
            </div>
          </div>
        {% endfor %}
        <div class="alert-message block-message info" style="text-align:center;">
  	If you don't feel right at home receiving direct admonition, please take a minute to read <a href="/crash_course?receiving" target="_new">some suggestions</a>.
        </div>
      {% else %}
        <h1>Welcome!</h1>
        <div class="alert-message block-message info">
          You don't have any admonitions yet. To get some action, you can <a href="/print" target="_new">print out</a> a special poster and post it up on your office door or wherever your friends will see it. If you are really hardcore, you can put your URL on a T-shirt! Your URL is:<br/>
          <pre style="margin:10px 0;"><a href="http://www.admonymous.com/{{ user.username }}">http://www.admonymous.com/{{ user.username }}</a></pre>
          You can also ask for feedback on the internet: <a target="twitter" href="http://twitter.com/home?status=Soliciting constructive admonitions: http://www.admonymous.com/{{ user.username }}">Solicit constructive admonitions via Twitter</a>
        </div>
      {% endif %}
    </div>

    

      
    {% if newer_offset or older_offset %}
    <div class="pagination" style="padding:0 20px;">
      <ul>
        <li class="prev{% if not older_offset %} disabled{% endif %}"><a href="#">&larr; Previous</a></li>
        {# <li class="active"><a href="#">1</a></li> #}
        {# <li><a href="#">2</a></li> #}
        {# <li><a href="#">3</a></li> #}
        {# <li><a href="#">4</a></li> #}
        {# <li><a href="#">5</a></li> #}
        <li class="next{% if not newer_offset %} disabled{% endif %}"><a href="#">Next &rarr;</a></li>
      </ul>
    </div>
    {% else %}
    <br/>
    {% endif %}

    <hr/>
    
    
    <input type="submit" class="btn danger" name="submit" value="Delete user account" id="delete-account" style="float:right;margin:23px 20px 0 0;"/>
    
  	<form action="/" method="post" accept-charset="utf-8" class="form-stacked">
  	  <strong>Update your note to visitors and/or user info:</strong>
  	  <fieldset>
  	    {% if username_taken %}
  	    <br/>
        <div class="alert-message error" style="width:469px;">
          Sorry, the username <strong>{{ username_taken }}</strong> is not available.
        </div>
        {% endif %}
        {% if success %}
  	    <br/>
        <div class="alert-message success" style="width:469px;">
          Updated! Make sure to tell your friends when you change your username.
        </div>
        {% endif %}
        <textarea name="message" style="width:502px;height:75px;margin:0 0 4px 0;">{{ user.message|default_if_none:"" }}</textarea><br/>
        <input name="name" value="{{ user.name }}" style="height:29px;"/>
        <input name="username" value="{{ user.username }}" style="height:29px;"/>
        <input type="submit" class="btn secondary" name="submit" value="Change" id="submit"/>
  	  </fieldset>
    </form>
    
  {% else %}
    
    <div style="width:502px;margin-left:auto;margin-right:auto;padding:40px 0 30px 0;">
      <form action="/" method="post" accept-charset="utf-8" class="form-stacked">
    	  {# <strong>Update your public message and user info:</strong> #}
    	  <fieldset>
    	    {% if username_taken %}
    	    <br/>
          <div class="alert-message error" style="width:469px;">
            Sorry, the username <strong>{{ username_taken }}</strong> is not available.
          </div>
          {% endif %}
          <label for="name">Your full name</label>
          <input name="name" value="{{ user.name|default_if_none:"" }}" style="height:29px;"/><br/>
          <label for="username">Pick a username</label>
          <input name="username" value="{{ user.username|default_if_none:"" }}" style="height:29px;"/><br/><br/>
          <label for="message">Write a brief note to visitors to your feedback page (optional):</label>
          <textarea name="message" style="width:502px;height:75px;margin:0 0 4px 0;">{{ user.message|default_if_none:"" }}</textarea><br/><br/>
          <input type="submit" class="btn secondary" name="submit" value="Begin" id="submit" style="float:right;"/>
    	  </fieldset>
      </form>
    </div>
    
  {% endif %}
  
{% endif %}  
{% endblock %}

